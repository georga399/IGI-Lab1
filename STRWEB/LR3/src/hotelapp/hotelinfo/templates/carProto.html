{% extends "base.html" %}
{% block content %}
<script>
  function Car(brand, number) {
      this.brand = brand;
      this.number = number;
  }

  Car.prototype.getBrand = function() {
      return this.brand;
  };

  Car.prototype.getNumber = function() {
      return this.number;
  };

  function OwnerCar(brand, number, owner) {
      Car.call(this, brand, number);
      this.owner = owner;
  }

  OwnerCar.prototype = Object.create(Car.prototype);
  OwnerCar.prototype.constructor = OwnerCar;

  OwnerCar.prototype.getOwner = function() {
      return this.owner;
  };

  const carsArray = [];

  function addCar() {
      const brand = document.getElementById('brand').value;
      const number = document.getElementById('number').value;
      const owner = document.getElementById('owner').value;

      const car = new OwnerCar(brand, number, owner);
      carsArray.push(car);

      document.getElementById('form').reset();
      alert('Car added successfully!');
  }

  function findOwners() {
      const brandToSearch = document.getElementById('searchBrand').value;
      const results = carsArray
          .filter(car => car.getBrand() === brandToSearch)
          .map(car => `${car.getOwner()} - ${car.getNumber()}`);
      
      document.getElementById('results').innerText = results.length > 0 ? results.join('\n') : 'No owners found.';
  }
</script>

<h1>Car Owner Management (Prototypal Inheritance)</h1>
<form id="form" onsubmit="event.preventDefault(); addCar();">
    <label for="brand">Brand:</label>
    <input type="text" id="brand" required><br>
    
    <label for="number">Number:</label>
    <input type="text" id="number" required><br>

    <label for="owner">Owner:</label>
    <input type="text" id="owner" required><br>

    <button type="submit">Add Car</button>
</form>

<h2>Find Owners by Brand</h2>
<input type="text" id="searchBrand" placeholder="Enter car brand">
<button onclick="findOwners()">Search</button>

<h3>Results:</h3>
<pre id="results"></pre>

{% endblock %}